<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>2. Functional programming with Scala &mdash; Logisland - JDev 2017 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Logisland - JDev 2017 1.0 documentation" href="index.html" />
    <link rel="next" title="3. An introduction to Big Data analysis with Spark" href="atelier-jdev-3-spark.html" />
    <link rel="prev" title="1. Big data messaging with Kafka" href="atelier-jdev-1-kafka.html" />
  
   

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="atelier-jdev-3-spark.html" title="3. An introduction to Big Data analysis with Spark"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="atelier-jdev-1-kafka.html" title="1. Big data messaging with Kafka"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Logisland - JDev 2017 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
        <a href="
    index.html" class="text-logo">Logisland - JDev 2017</a>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="atelier-jdev-1-kafka.html">1. Big data messaging with Kafka</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">2. Functional programming with Scala</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#style">Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-types">Specifying Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-syntax">Basic Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuples">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collections">Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pattern-matching">Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functional-programming">Functional Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-option-not-null">Use Option not null</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-classes">Implicit Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#magic-methods">Magic methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="atelier-jdev-3-spark.html">3. An introduction to Big Data analysis with Spark</a></li>
<li class="toctree-l1"><a class="reference internal" href="atelier-jdev-4-logisland.html">4. Botnet traces mining with logisland</a></li>
</ul>

    
  </div>
</div>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>2. Functional programming with Scala</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="functional-programming-with-scala">
<h1>2. Functional programming with Scala<a class="headerlink" href="#functional-programming-with-scala" title="Permalink to this headline">¶</a></h1>
<p>credits: <a class="reference external" href="http://www.dhgarrette.com/nlpclass/scala/basics.html">http://www.dhgarrette.com/nlpclass/scala/basics.html</a></p>
<ul class="simple">
<li>Variables</li>
<li>Style</li>
<li>Specifying Types</li>
<li>Basic Syntax</li>
<li>Functions</li>
<li>Classes</li>
<li>Tuples</li>
<li>Collections</li>
<li>Pattern Matching</li>
<li>Functional Programming</li>
<li>Use Option not null</li>
<li>Implicit Classes</li>
<li>Magic methods</li>
</ul>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<p>There are two keywords for declaring variables: val and var. Identifers
declared with val cannot be reassigned; this is like a final variable in
Java. Identifers declared with var may be reassigned.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="mi">1</span>
<span class="k">var</span> <span class="n">b</span> <span class="k">=</span> <span class="mi">2</span>

<span class="n">b</span> <span class="k">=</span> <span class="mi">3</span>  <span class="c1">// fine</span>
<span class="n">a</span> <span class="k">=</span> <span class="mi">4</span>  <span class="c1">// error: reassignment to val</span>
</pre></div>
</div>
<p>You should (pretty much) exclusively use val. If you find yourself
wanting to use a var, there is almost certainly a better way to
structure your code.</p>
</div>
<div class="section" id="style">
<h2>Style<a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>class names start with a capital letter</li>
<li>variables and methods start with lowercase letters</li>
<li>constants start with capitals</li>
<li>everything uses camelCase</li>
</ul>
</div>
<div class="section" id="specifying-types">
<h2>Specifying Types<a class="headerlink" href="#specifying-types" title="Permalink to this headline">¶</a></h2>
<p>Scala has powerful type inference capabilities, so, in many cases, types
do not need to be specified. However, types may be specified at any
time. This is often useful for making complex code more readable, or as
a way of protecting against errors. Additionally, types can be specifed
on any subexpression, not just on variable assignments.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="mi">4</span>                 <span class="c1">// a: Int = 4</span>
<span class="k">val</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">4</span>            <span class="c1">// b: Int = 4</span>
<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="o">+</span> <span class="mi">5</span>   <span class="c1">// c: Double = 9.0</span>
</pre></div>
</div>
<p>All types are determined statically during compilation.</p>
</div>
<div class="section" id="basic-syntax">
<h2>Basic Syntax<a class="headerlink" href="#basic-syntax" title="Permalink to this headline">¶</a></h2>
<div class="section" id="imports">
<h3>&nbsp;Imports<a class="headerlink" href="#imports" title="Permalink to this headline">¶</a></h3>
<p>Classes, objects, and static methods can all be imported. An underscore
can be used as a wildcard to import everything from a particular
context.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">scala.collection.immutable.BitSet</span>
<span class="k">import</span> <span class="nn">scala.math.log</span>
<span class="k">import</span> <span class="nn">scala.math._</span>
</pre></div>
</div>
</div>
<div class="section" id="semi-colon-inference">
<h3>&nbsp;Semi-colon Inference<a class="headerlink" href="#semi-colon-inference" title="Permalink to this headline">¶</a></h3>
<p>Scala will infer semi-colons at the ends of lines, so they do not need
to be explicitly written. If you add them yourself, then Scala will not
complain, but it doesn’t look as nice.</p>
<p>Semi-colons can also be used to write several statements on a single
line, but this should be avoided because it’s harder to read in most
circumstances.</p>
</div>
<div class="section" id="string-interpolation">
<h3>&nbsp;String Interpolation<a class="headerlink" href="#string-interpolation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">4</span>
<span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="s">&quot;stuff&quot;</span>
<span class="k">val</span> <span class="n">z</span> <span class="k">=</span> <span class="s">f&quot;You can say </span><span class="si">$x</span><span class="s"> is inverse of </span><span class="si">${</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span><span class="si">}</span><span class="s">%.2f and </span><span class="si">$y</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>See the docs for more.</p>
</div>
<div class="section" id="control">
<h3>&nbsp;Control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h3>
<p>Scala has control many familiar control structures.</p>
<p>if-else</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">4</span>
<span class="k">if</span><span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&quot;greater than 2&quot;</span><span class="o">)</span>
<span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&quot;less than to 2&quot;</span><span class="o">)</span>
<span class="k">else</span>
  <span class="n">println</span><span class="o">(</span><span class="s">&quot;equal to 2&quot;</span><span class="o">)</span>
<span class="c1">// prints &quot;greater than 2&quot;</span>
</pre></div>
</div>
<p>for-each loop</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>
<span class="k">for</span><span class="o">(</span><span class="n">x</span> <span class="k">&lt;-</span> <span class="n">xs</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="n">x</span><span class="o">)</span>
<span class="c1">// prints numbers 1 through 5</span>
</pre></div>
</div>
<p>But the for-each loop can be used in more complex ways, allowing
succinct syntax for looping over multiple collections and filtering:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">for</span><span class="o">(</span>
   <span class="n">x</span> <span class="k">&lt;-</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span>  <span class="c1">// outer loop over a vector</span>
   <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>           <span class="c1">// filter out even xs</span>
   <span class="n">y</span> <span class="k">&lt;-</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">);</span>         <span class="c1">// inner loop over a list</span>
   <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">6</span>            <span class="c1">// filter out entries that don&#39;t sum to 6</span>
  <span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="s">s&quot;x=</span><span class="si">$x</span><span class="s">, y=</span><span class="si">$y</span><span class="s">&quot;</span><span class="o">)</span>
<span class="c1">// prints:</span>
<span class="c1">//   x=3, y=3</span>
<span class="c1">//   x=5, y=1</span>
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">for</span><span class="o">(</span><span class="n">x</span> <span class="k">&lt;-</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">))</span>
  <span class="k">if</span><span class="o">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="k">for</span><span class="o">(</span><span class="n">y</span> <span class="k">&lt;-</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">))</span>
      <span class="k">if</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span>
        <span class="n">println</span><span class="o">(</span><span class="s">s&quot;x=</span><span class="si">$x</span><span class="s">, y=</span><span class="si">$y</span><span class="s">&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="everything-is-an-expression">
<h3>&nbsp;Everything is an Expression<a class="headerlink" href="#everything-is-an-expression" title="Permalink to this headline">¶</a></h3>
<p>In Scala, many things are expression that are not in other languages.</p>
<p>Blocks are expressions that are evaluated and resolve to the value of
the final expression in the block:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">intermediate1</span> <span class="k">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span>
  <span class="k">val</span> <span class="n">intermediate2</span> <span class="k">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">5</span>
  <span class="n">intermediate1</span> <span class="o">*</span> <span class="n">intermediate2</span>  <span class="c1">// will be &quot;returned&quot; from the block</span>
<span class="o">}</span>
<span class="c1">// x: Int = 45</span>
</pre></div>
</div>
<p>If-else constructs are expressions whose value is the branch that is
taken. The return type of an if-else expression is the lowest common
ancestor of the values of each branch.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="mi">4</span>
<span class="k">val</span> <span class="n">x</span> <span class="k">=</span>              <span class="c1">// type is inferred as Iterable[Int]</span>
  <span class="k">if</span><span class="o">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">)</span>          <span class="c1">//    because</span>
    <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>    <span class="c1">//      Vector extends Iterable</span>
  <span class="k">else</span>               <span class="c1">//    and</span>
    <span class="nc">Set</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>         <span class="c1">//      so does Set</span>
<span class="c1">// x: Iterable[Int] = Vector(1, 2, 3)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>Functions are defined using the def keyword.</p>
<p>A few points:</p>
<ul class="simple">
<li>Parameter types must be specified.</li>
<li>There can be multiple parameter lists</li>
<li>Return types are optional: they can be inferred at compile-time.
(Unless the function is recursive.)</li>
<li>The body of the function should be separated from the signature by an
equals sign (unless the return type is Unit, indicating no return
value – a “void” function). This keeps the syntax consistent with
assignments: name on the left, expression on the right.</li>
<li>Braces are not needed around the function body if it is only a single
expression. The equals sign must be followed by a single expression,
but, as discussed above, expressions can take many forms including
brace-enclosed blocks.</li>
<li>Parentheses are not needed in the function signature if there are no
parameters. If the function has empty parentheses, then they are
optional on the call. If the function is defined without parentheses,
then they are not allowed, making the call look like a variable
access, except that the value is recomputed on every access (“uniform
access principle”).</li>
<li>The return keyword is not needed (and should be avoided). Since every
block is an expression, and the last expression in a block is the
value of the block, the result of the last expression in a function
body will be the returned value.</li>
</ul>
<p>Some examples</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>    <span class="c1">// no braces needed</span>
<span class="k">def</span> <span class="n">add2</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)(</span><span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>   <span class="c1">// two parameter lists</span>
<span class="k">def</span> <span class="n">mystring</span><span class="o">()</span> <span class="k">=</span> <span class="s">&quot;something&quot;</span>       <span class="c1">// parentheses option in caller</span>
<span class="k">def</span> <span class="n">mystring2</span> <span class="k">=</span> <span class="s">&quot;something else&quot;</span>   <span class="c1">// no parentheses allowed in caller</span>
<span class="k">def</span> <span class="n">doubleSum</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>  <span class="c1">// braces for multiple statements</span>
  <span class="k">val</span> <span class="n">sum</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>
  <span class="n">sum</span> <span class="o">*</span> <span class="mi">2</span>                          <span class="c1">// &quot;return value&quot;</span>
<span class="o">}</span>
<span class="k">def</span> <span class="n">ceilHalf</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>                   <span class="c1">// if-else expression is the final</span>
    <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span>
  <span class="k">else</span>
    <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="o">}</span>
<span class="k">def</span> <span class="n">mult</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span>  <span class="c1">// return type specified</span>
<span class="n">add</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>             <span class="c1">// res48: Int = 5</span>
<span class="n">add2</span><span class="o">(</span><span class="mi">2</span><span class="o">)(</span><span class="mi">3</span><span class="o">)</span>           <span class="c1">// res49: Int = 5</span>
<span class="n">mystring</span><span class="o">()</span>           <span class="c1">// res50: String = something</span>
<span class="n">mystring</span>             <span class="c1">// res51: String = something</span>
<span class="n">mystring2</span>            <span class="c1">// res52: String = something else</span>
<span class="n">doubleSum</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>       <span class="c1">// res53: Int = 10</span>
<span class="n">ceilHalf</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>          <span class="c1">// res54: Int = 2</span>
<span class="n">mult</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>            <span class="c1">// res55: Int = 5</span>
</pre></div>
</div>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<p>Classes can be declared using the class keyword. Methods are declared
with the def keyword. Methods and fields are public by default, but can
be specified as protected or private. Constructor arguments are, by
default, private, but can be proceeded by val to be made public.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="k">val</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">iPlus5</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span>
  <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">jPlus5</span> <span class="k">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">5</span>

  <span class="k">def</span> <span class="n">addTo</span><span class="o">(</span><span class="n">k</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">k</span><span class="o">,</span> <span class="n">j</span> <span class="o">+</span> <span class="n">k</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">subtractFrom</span><span class="o">(</span><span class="n">k</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">k</span><span class="o">,</span> <span class="n">j</span> <span class="o">+</span> <span class="n">k</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">sum</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>
  <span class="k">def</span> <span class="n">doSomeStuff</span><span class="o">()</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">jPlus5</span>
    <span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="n">j</span> <span class="o">-</span> <span class="n">i</span> <span class="o">+</span> <span class="n">jPlus5</span>
    <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">j</span>              <span class="c1">// accessing a public constructor-arg field</span>
<span class="n">a</span><span class="o">.</span><span class="n">iPlus5</span>         <span class="c1">// accessing a public field</span>
<span class="n">a</span><span class="o">.</span><span class="n">addTo</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>       <span class="c1">// calling a method with an argument</span>
<span class="n">a</span><span class="o">.</span><span class="n">sum</span>            <span class="c1">// calling a no-arg method, parentheses not permitted</span>
<span class="n">a</span><span class="o">.</span><span class="n">doSomeStuff</span>    <span class="c1">// calling a no-arg method, parentheses optional</span>
</pre></div>
</div>
<div class="section" id="inheritance">
<h3>&nbsp;Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h3>
<p>Classes are extended using the extends keyword</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">B</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">k</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="n">A</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="traits">
<h3>&nbsp;Traits<a class="headerlink" href="#traits" title="Permalink to this headline">¶</a></h3>
<p>Traits are like interfaces, but they are allowed to have members
declared (“mix-in” members).</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">C</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">methodToImplement</span><span class="k">:</span> <span class="kt">Int</span>
  <span class="k">def</span> <span class="n">doCThing</span> <span class="k">=</span> <span class="s">&quot;C thing&quot;</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">D</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">doDThing</span> <span class="k">=</span> <span class="s">&quot;D thing&quot;</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">E</span> <span class="k">extends</span> <span class="n">C</span> <span class="k">with</span> <span class="n">D</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">methodToImplement</span> <span class="k">=</span> <span class="mi">7</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">e</span> <span class="k">=</span> <span class="k">new</span> <span class="n">E</span>      <span class="c1">// e: E = E@766b0524</span>
<span class="n">e</span><span class="o">.</span><span class="n">doCThing</span>         <span class="c1">// res14: String = C thing</span>
</pre></div>
</div>
</div>
<div class="section" id="objects">
<h3>&nbsp;Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h3>
<p>Scala does not allow static members of classes or traits. Instead all
static members must be declared on an object.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">object</span> <span class="nc">F</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">num</span> <span class="k">=</span> <span class="mi">5</span>
  <span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="o">}</span>

<span class="n">F</span><span class="o">.</span><span class="n">num</span>         <span class="c1">// res15: Int = 5</span>
<span class="n">F</span><span class="o">.</span><span class="n">add</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>   <span class="c1">// res16: Int = 7</span>
</pre></div>
</div>
<p>The terminology is somewhat confusing since an “object” can also mean an
instantiated instance of a class.</p>
</div>
<div class="section" id="case-classes">
<h3>&nbsp;Case Classes<a class="headerlink" href="#case-classes" title="Permalink to this headline">¶</a></h3>
<p>Case classes are syntactic sugar for classes with a few methods
pre-specified for convenience. These include toString, equals, and
hashCode, as well as static methods apply (so that the new keyword is
not needed for construction) and unapply (for pattern matching). Case
class constructor args are also public by default. Case classes are not
allowed to be extended. Otherwise, they are just like normal classes.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">G</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">sum</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>
<span class="o">}</span>

<span class="k">val</span> <span class="n">g</span> <span class="k">=</span> <span class="n">G</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>    <span class="c1">// g: G = G(4,5)</span>
<span class="n">g</span><span class="o">.</span><span class="n">sum</span>              <span class="c1">// res19: Int = 9</span>
<span class="n">g</span> <span class="o">==</span> <span class="n">G</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>        <span class="c1">// res21: Boolean = true</span>
</pre></div>
</div>
</div>
<div class="section" id="operators-or-lack-thereof">
<h3>&nbsp;Operators (or lack thereof)<a class="headerlink" href="#operators-or-lack-thereof" title="Permalink to this headline">¶</a></h3>
<p>Scala does not have operators. Anything that looks like an operator in
Scala is actually a method:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;this&quot;</span> <span class="o">+</span> <span class="s">&quot;that&quot;</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;thisthat&quot;</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="s">&quot;this&quot;</span><span class="o">.+(</span><span class="s">&quot;that&quot;</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">thisthat</span>
</pre></div>
</div>
<p>Scala just knows that if there is no dot or parentheses, then it should
treat the expression as a call to a 1-argument method called +.</p>
<p>You can, therefore, define your own “operators”:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="o">+(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">i</span><span class="o">)</span>
  <span class="k">def</span> <span class="o">++-||-++(</span><span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">j</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Which can be used like this:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="o">++-||-++</span> <span class="mi">2</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
</pre></div>
</div>
<p>However, do not abuse this power. It can make your code extremely
unreadable.</p>
</div>
<div class="section" id="dot-and-parentheses-dropping">
<h3>&nbsp;Dot-and-Parentheses Dropping<a class="headerlink" href="#dot-and-parentheses-dropping" title="Permalink to this headline">¶</a></h3>
<p>Since Scala makes no distinction between methods and “operators”, you
can actually drop the dot and parentheses from any 1-argument method:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">addTo</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">i</span><span class="o">)</span>
<span class="o">}</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="n">addTo</span> <span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
</pre></div>
</div>
<p>This can sometimes make things more readable:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">scala.collection.immutable.Range.Inclusive</span> <span class="o">=</span> <span class="nc">Range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
</pre></div>
</div>
<p>Again, do not abuse this power or your code will become extremely
unreadable.</p>
<p>I really dislike overuse of this notation. I think it is appropriate in
limited circumstances where the two sides of the operator have something
like equal standing, like in the example with to for a Range where it’s
not quite fair to call the end of a range an argument, even though it
technically is.</p>
</div>
</div>
<div class="section" id="tuples">
<h2>Tuples<a class="headerlink" href="#tuples" title="Permalink to this headline">¶</a></h2>
<p>Scala has Tuple types for 1 though 22 elements. In a tuple, each element
has its own type, and each element can be accessed using the ._n
syntax, where n is a 1-based index.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;second&quot;</span><span class="o">,</span> <span class="mf">3.4</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="n">second</span><span class="o">,</span><span class="mf">3.4</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">_2</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">second</span>
</pre></div>
</div>
<p>Just for fun, Scala has the method -&gt; defined on Any (and is therefore
inherited by all types) for constructing a Tuple2:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">2</span>
<span class="n">res1</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="collections">
<h2>Collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h2>
<p>The Scala collections framework is pretty extensive. But for now, I’ll
just introduce the three most important collections:</p>
<div class="section" id="vector">
<h3>&nbsp;Vector<a class="headerlink" href="#vector" title="Permalink to this headline">¶</a></h3>
<p>A Vector[T] is a sequence of items of type T. Elements can be accessed
by 0-based index.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">Vector</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="set">
<h3>&nbsp;Set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h3>
<p>A Set[T] is an unordered collection of items of type T. Since it’s a
set, no element can appear more than once. Since there is no order in a
Set, elements cannot be accessed by index, but it is possible to check
whether an element is in the set.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">Set</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>
</pre></div>
</div>
</div>
<div class="section" id="map">
<h3>&nbsp;Map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h3>
<p>A Map[K,V] is an associative array or dictionary type mapping elements
of type K to elements of type V. Values can be accessed through their
keys.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="s">&quot;one&quot;</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="s">&quot;two&quot;</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="s">&quot;three&quot;</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">Int</span>,<span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="n">one</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">two</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="n">three</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">a</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="n">res2</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">one</span>
</pre></div>
</div>
<p>Note: Remember that the syntax a -&gt; b is nothing more than writing the
pair (a,b).</p>
</div>
<div class="section" id="iterator">
<h3>&nbsp;Iterator<a class="headerlink" href="#iterator" title="Permalink to this headline">¶</a></h3>
<p>An Iterator[T] is a lazy sequence, meaning that it only evaluates its
elements once they are accessed. Additionally, iterators can only be
traversed one time. This is very useful for things like conserving
memory by handling one element at a time or saving time by only
evaluating as many elements as you need.</p>
<p>Accidentally traversing the same iterator more than once is a common
source of bugs. If you want to be able to access the elements more than
once, you can always call .toVector to load the entire thing into
memory.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Iterator</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="n">a</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="c1">// stage an operation, but don&#39;t traverse yet</span>
<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">b</span><span class="o">.</span><span class="n">sum</span>             <span class="c1">// c: Int = 9</span>
<span class="k">val</span> <span class="n">d</span> <span class="k">=</span> <span class="n">b</span><span class="o">.</span><span class="n">mkString</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">)</span>   <span class="c1">// d: String = &quot;&quot;</span>

<span class="k">val</span> <span class="n">e</span> <span class="k">=</span> <span class="nc">Iterator</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="n">e</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="c1">// stage an operation, but don&#39;t traverse yet</span>
<span class="k">val</span> <span class="n">g</span> <span class="k">=</span> <span class="n">f</span><span class="o">.</span><span class="n">toVector</span>        <span class="c1">// g: Vector[Int] = Vector(2, 3, 4)</span>
<span class="k">val</span> <span class="n">h</span> <span class="k">=</span> <span class="n">g</span><span class="o">.</span><span class="n">sum</span>             <span class="c1">// h: Int = 9</span>
<span class="k">val</span> <span class="n">i</span> <span class="k">=</span> <span class="n">g</span><span class="o">.</span><span class="n">mkString</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">)</span>   <span class="c1">// i: String = &quot;2 3 4&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pattern-matching">
<h2>Pattern Matching<a class="headerlink" href="#pattern-matching" title="Permalink to this headline">¶</a></h2>
<p>Pattern matching is a really awesome capability of Scala. It’s extremely
useful and flexible, allowing you to write very succinct code. It can be
used in a variety of situations, and many built-in Scala types already
have pattern-matching behavior defined.</p>
<div class="section" id="variable-assignment">
<h3>&nbsp;Variable assignment:<a class="headerlink" href="#variable-assignment" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
<span class="k">val</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=</span> <span class="n">a</span>          <span class="c1">// x: Int = 1, y: Int = 2</span>

<span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
<span class="k">val</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=</span> <span class="n">b</span>    <span class="c1">// x: Int = 1, y: Int = 2</span>

<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
<span class="k">val</span> <span class="nc">Some</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="k">=</span> <span class="n">c</span>        <span class="c1">// x: Int = 5</span>
</pre></div>
</div>
</div>
<div class="section" id="match-expressions">
<h3>&nbsp;Match expressions:<a class="headerlink" href="#match-expressions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>

<span class="k">val</span> <span class="n">sum</span> <span class="k">=</span>                             <span class="c1">// sum: Int = 6</span>
  <span class="n">a</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="k">case</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">z</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
  <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="for-loops">
<h3>&nbsp;For-loops:<a class="headerlink" href="#for-loops" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">),</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">))</span>
<span class="k">for</span><span class="o">((</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">&lt;-</span> <span class="n">a</span><span class="o">)</span>         <span class="c1">// prints 3, 7, and 11</span>
  <span class="n">println</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</div>
<p>Anonymous (partial) functions. More on this example later. Note the use
of curly braces instead of parentheses.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">),</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">))</span>
<span class="n">a</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">}</span>  <span class="c1">// res0: Vector[Int] = Vector(3, 7, 11)</span>
</pre></div>
</div>
<p>In all of these cases, the matching function works the same way.</p>
</div>
<div class="section" id="matching-regular-expressions">
<h3>&nbsp;Matching Regular Expressions<a class="headerlink" href="#matching-regular-expressions" title="Permalink to this headline">¶</a></h3>
<p>You can match directly with regular expressions:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="nc">SomeRE</span> <span class="k">=</span> <span class="s">&quot;&quot;&quot;a+b+&quot;&quot;&quot;</span><span class="o">.</span><span class="n">r</span>
<span class="s">&quot;aaabb&quot;</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">SomeRE</span><span class="o">()</span> <span class="k">=&gt;</span> <span class="s">&quot;match found!&quot;</span>
<span class="o">}</span>
<span class="c1">// match found!</span>
</pre></div>
</div>
<p>Additionally, by using parentheses, you can indicate groups in the
pattern that are to be captured, and then have the pattern matcher
assign those captured groups to variables:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="nc">SomeRE</span> <span class="k">=</span> <span class="s">&quot;&quot;&quot;(\d+), (\S+) \S+ (\S+).*&quot;&quot;&quot;</span><span class="o">.</span><span class="n">r</span>
<span class="s">&quot;12, two more words plus some other stuff&quot;</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">SomeRE</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="s">f&quot;matches with a=</span><span class="si">$a</span><span class="s"> b=</span><span class="si">$b</span><span class="s"> c=</span><span class="si">$c</span><span class="s">&quot;</span>
<span class="o">}</span>
<span class="c1">// matches with a=12 b=two c=words</span>
</pre></div>
</div>
</div>
<div class="section" id="constants-wildcards-sequences-conditions-and-recursive-matching">
<h3>&nbsp;Constants, Wildcards, Sequences, Conditions, and Recursive Matching<a class="headerlink" href="#constants-wildcards-sequences-conditions-and-recursive-matching" title="Permalink to this headline">¶</a></h3>
<p>Pattern matching is very flexible and allows not just for matching flat
collections of variables.</p>
<p>A pattern can contain constants. In order for the matcher to recognize
these terms as constants and not variables, they must either be a
literal, start with a capital letter, or appear in backticks:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">C</span> <span class="k">=</span> <span class="mi">2</span>
<span class="k">val</span> <span class="n">v</span> <span class="k">=</span> <span class="mi">3</span>
<span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">C</span><span class="o">,</span> <span class="n">`v`</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="s">&quot;this will match&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Wildcards are useful for specifying that a portion of the expression can
match anything. This is often used as a “default” case.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="s">&quot;this will match anything that starts with a 1&quot;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="s">&quot;will match anything not matched by an above case&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Sequences can be matched without knowing exactly how many items there
are:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="s">&quot;matches with x=1, y=2, and ignores rest&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Conditions can be specified with if clauses:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="k">=&gt;</span> <span class="s">&quot;this will match if x == y&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Patterns can be nested for more complex matching:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">),</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">))</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Vector</span><span class="o">((</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="s">&quot;this will match with x=1, y=2&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="variable-binding-of-a-pattern">
<h3>&nbsp;Variable Binding of a Pattern<a class="headerlink" href="#variable-binding-of-a-pattern" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to match a pattern and then bind the matched portion
to a variable. This is done with the &#64; symbol:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">),</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">))</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">a</span> <span class="k">@</span> <span class="nc">Vector</span><span class="o">((</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="s">&quot;binds entire Vector to `a`&quot;</span>
  <span class="k">case</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">a</span> <span class="k">@</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="s">&quot;binds first pair to `a`&quot;</span>
  <span class="k">case</span> <span class="nc">Vector</span><span class="o">((</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="n">a</span> <span class="k">@</span> <span class="k">_</span><span class="o">*)</span> <span class="k">=&gt;</span> <span class="s">&quot;binds tail sequence to `a`&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>&nbsp;Case Classes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Case classes automatically specify the behavior required for use in
pattern matching.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>
<span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
<span class="n">a</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">A</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="s">&quot;this will match with x=1, y=2&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-extractors">
<h3>&nbsp;Defining Extractors<a class="headerlink" href="#defining-extractors" title="Permalink to this headline">¶</a></h3>
<p>Many Scala types come with pattern matching behavior defined, as does
any class defined as a case class. However, it is possible to define
arbitrary pattern matching behavior for your own situations. Matching
behavior is defined by the unapply method on either a class or object.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">object</span> <span class="nc">Half</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">unapply</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span>
    <span class="k">if</span><span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
      <span class="nc">Some</span><span class="o">((</span><span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="o">))</span> <span class="c1">// indicates a match, specifies return behavior</span>
    <span class="k">else</span>
      <span class="nc">None</span>             <span class="c1">// indicates no match</span>
<span class="o">}</span>

<span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">map</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Half</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="s">s&quot;match with (</span><span class="si">$x</span><span class="s">,</span><span class="si">$y</span><span class="s">)&quot;</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="s">&quot;no match&quot;</span>
<span class="o">}</span>
<span class="c1">// res0: Vector[String] = Vector(no match, match with (1,1), no match)</span>
</pre></div>
</div>
<p>This is, in fact, how pattern matching is implemented for all Scala
built-in classes as well. For example, there is a Vector object that has
an unapply method. And for every case class that is defined, the
compiler generates an object with the same name and implements an
unapply method on it.</p>
<p>Extractors for variable-length patterns (like Vector has) can be
specified with an unapplySeq method.</p>
</div>
</div>
<div class="section" id="functional-programming">
<h2>Functional Programming<a class="headerlink" href="#functional-programming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="favor-immutability">
<h3>&nbsp;Favor Immutability<a class="headerlink" href="#favor-immutability" title="Permalink to this headline">¶</a></h3>
<p>You should (pretty much) always use immutable collections. You code will
therefore consist largely of operations on collections that produce new
collections. Immutability keeps your code safer, makes it easier to
reason about what is happening, and can have performance gains when used
correctly.</p>
</div>
<div class="section" id="first-class-functions">
<h3>&nbsp;First-class functions<a class="headerlink" href="#first-class-functions" title="Permalink to this headline">¶</a></h3>
<p>One of the most important characteristics of functional programming is
that functions are first-class members of the language. This means that
they can be stored in variables and, more importantly, passed as
arguments to other functions.</p>
<p>To facilitate these kinds of uses, Scala has nice syntax for defining
anonymous functions. In Scala, the symbol =&gt; is used to write lambda
functions:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">add1a</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>              <span class="c1">// arg type declared</span>
<span class="k">val</span> <span class="n">add1b</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>       <span class="c1">// function&#39;s type declared</span>
<span class="n">add1a</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>                                   <span class="c1">// res0: Int = 3</span>
<span class="n">add1b</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>                                   <span class="c1">// res1: Int = 3</span>

<span class="k">def</span> <span class="n">addSome</span><span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">),</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">f</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="c1">// first arg is a function</span>
<span class="n">addSome</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>                      <span class="c1">// res2: Int = 3</span>
<span class="n">addSome</span><span class="o">(</span><span class="n">add1a</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>                           <span class="c1">// res3: Int = 3</span>
</pre></div>
</div>
<p>Scala also provides the ability to write an underscore (_) as
short-hand for x =&gt; x (kind of).</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">add2a</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">_</span> <span class="o">+</span> <span class="mi">2</span>          <span class="c1">// function&#39;s type declared</span>
<span class="k">val</span> <span class="n">add2b</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="k">_</span>          <span class="c1">// function&#39;s type declared</span>
<span class="n">add2a</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>                                 <span class="c1">// res4: Int = 4</span>
<span class="n">add2b</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>                                 <span class="c1">// res5: Int = 4</span>
<span class="n">addSome</span><span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>                        <span class="c1">// res6: Int = 4</span>
<span class="n">addSome</span><span class="o">(</span><span class="n">add2a</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>                        <span class="c1">// res7: Int = 4</span>
</pre></div>
</div>
</div>
<div class="section" id="some-fundamental-methods">
<h3>&nbsp;Some fundamental methods<a class="headerlink" href="#some-fundamental-methods" title="Permalink to this headline">¶</a></h3>
<p>The Scala API is extremely useful for finding out what methods are
availble on various collections. There are a lot of methods, but here
are a few of the most important:</p>
<p><strong>map</strong>: Take a function as an argument and apply it to every element in
the collection.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span>  <span class="c1">// same as...</span>
<span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span>       <span class="c1">// res0: Vector[Int] = Vector(3, 4, 5)</span>
</pre></div>
</div>
<p><strong>flatten</strong>: Flatten a collection of collections.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">),</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">),</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">9</span><span class="o">))</span>
<span class="n">a</span><span class="o">.</span><span class="n">flatten</span>   <span class="c1">// res1: Vector[Int] = Vector(1, 2, 3, 4, 5, 6, 7, 8, 9)</span>
</pre></div>
</div>
<p><strong>flatMap</strong>: Map a function over the collection and flatten the result</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">flatMap</span><span class="o">(</span><span class="n">n</span> <span class="k">=&gt;</span> <span class="nc">Vector</span><span class="o">.</span><span class="n">fill</span><span class="o">(</span><span class="n">n</span><span class="o">)(</span><span class="s">s&quot;[</span><span class="si">$n</span><span class="s">]&quot;</span><span class="o">))</span>
<span class="c1">// res2: Vector[String] = Vector([1], [2], [2], [3], [3], [3])</span>
</pre></div>
</div>
<p><strong>foldLeft</strong>: Map a function over the collection, accumulating the
results. Takes two parameters: the base value and the function.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">0</span><span class="o">)((</span><span class="n">accum</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">accum</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>   <span class="c1">// res3: Int = 6</span>
</pre></div>
</div>
<p><strong>filter</strong>: Remove items for which the given predicate is false</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">filter</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>   <span class="c1">// same as...</span>
<span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">filter</span><span class="o">(</span><span class="k">_</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>   <span class="c1">// res4: Vector[Int] = Vector(1, 3)</span>
</pre></div>
</div>
<p>Worth noting: Scala is extremely clever about giving you back the type
of collection that you’d expect. It tries to give you back what you
started with, and if it can’t, then it gives you the closest thing
possible.</p>
</div>
<div class="section" id="for-comprehensions">
<h3>For-Comprehensions<a class="headerlink" href="#for-comprehensions" title="Permalink to this headline">¶</a></h3>
<p>In Scala, the for-statement is actually syntactic sugar for a series of
calls to collections methods.</p>
<p>When you write the statement:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">for</span><span class="o">(</span>
   <span class="n">x</span> <span class="k">&lt;-</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span>
   <span class="n">y</span> <span class="k">&lt;-</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
  <span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</div>
<p>the compiler rewrites this as:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">).</span><span class="n">foreach</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span>
  <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">foreach</span><span class="o">(</span><span class="n">y</span> <span class="k">=&gt;</span>
    <span class="n">println</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)))</span>
</pre></div>
</div>
<p>Since these loops do not evaluate to anything, they can be thought of as
statements. (Technically they are expressions that evaluate to Unit, but
that’s the same as not evaluating to anything.)</p>
<p>Scala also provides a mechanism for for-comprehensions, expressions with
similar syntax that produce collections. These are signaled by the yield
keyword:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span>
  <span class="k">for</span><span class="o">(</span>
     <span class="n">x</span> <span class="k">&lt;-</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span> <span class="c1">// outer loop over a vector</span>
     <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>          <span class="c1">// filter out even xs</span>
     <span class="n">y</span> <span class="k">&lt;-</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">);</span>        <span class="c1">// inner loop over a list</span>
     <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">6</span>           <span class="c1">// filter out entries that don&#39;t sum to 6</span>
    <span class="o">)</span> <span class="k">yield</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="c1">// a: scala.collection.immutable.Vector[Int] = Vector(9, 5)</span>
</pre></div>
</div>
<p>This is accomplished by having the compiler translate the expression
into a series of method calls. Each iteration is a call to flatMap and
the last iteration is a call is to map:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span>
  <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>
    <span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span>
      <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="n">y</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span>
        <span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">y</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">))</span>
<span class="c1">// a: scala.collection.immutable.Vector[Int] = Vector(9, 5)</span>
</pre></div>
</div>
</div>
<div class="section" id="parallelization">
<h3>Parallelization<a class="headerlink" href="#parallelization" title="Permalink to this headline">¶</a></h3>
<p>The many of the higher-order functions on Scala’s collections can
trivially be run in parallel, and because they are immutable, they are
implicitly thread-safe.</p>
<p>Collections are converted to their parallel versions with the method
.par. Parallel collections can be converted back using .seq. For
example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">)</span>     <span class="c1">// create a vector</span>
<span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="n">a</span><span class="o">.</span><span class="n">par</span>               <span class="c1">// make the vector parallel</span>
<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">b</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>   <span class="c1">// functions executed on different cores</span>
<span class="k">val</span> <span class="n">d</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">seq</span>               <span class="c1">// back to a normal vector</span>
</pre></div>
</div>
<p>Parallelization has additional overhead, but with very large collections
and many cores, it will likely be much faster than sequential execution.</p>
<p>Note that not all operations are parallelizable. For example, foldLeft
cannot be parallelized because it must be run left-to-right. If you want
to fold in a parallelizable way, you must use fold and give it a
function that can be run out of order:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">).</span><span class="n">par</span><span class="o">.</span><span class="n">fold</span><span class="o">(</span><span class="mi">0</span><span class="o">)((</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-option-not-null">
<h2>Use Option not null<a class="headerlink" href="#use-option-not-null" title="Permalink to this headline">¶</a></h2>
<p>Don’t ever use null. Ever.</p>
<p>Scala provides a much better alternative: Option. An Option is basically
a box around a type that can either contain an object of that type, or
contain nothing. This is implemented such that Option[T] is a trait
(interface), and it has two implementing classes: Some[T] and None.</p>
<p>So, if you write a function that, for example, needs to return an Int,
but that might sometimes not want to return a value, instead of
returning null as the default, you can make the return type Option[Int],
and return either Some[Int], when there is a value, or None, when there
is not:</p>
<div class="highlight-scala"><div class="highlight"><pre>def indexOf[T](a: T, xs: Vector[T], i: Int = 0): Option[Int] = {
  if(i &gt;= xs.length)
    None                        // Vector exhausted.  No match found.
  else if(xs(i) == a)
    Some(i)                     // Found a match.  Return the index.
  else
    indexOf(a, xs, i + 1)       // Not a match.  Keep looking.
}

indexOf(&#39;c&#39;, &quot;abcdefg&quot;.toVector)     // res0: Option[Int] = Some(2)
indexOf(&#39;k&#39;, &quot;abcdefg&quot;.toVector)     // res1: Option[Int] = None
</pre></div>
</div>
<p>When we get the result, we will always know whether the value is present
or not, without having to null-check. Furthermore, Option has a number
of really terrific methods analogous to those on the collections, that
make using an Option very easy.</p>
<p>For example, if you wanted to perform some action on the result of
indexOf, but only if there was actually a result, in Java you might do
something like this:</p>
<div class="highlight-scala"><div class="highlight"><pre>// DON&#39;T DO THIS!!!
val n: Int = indexOfWithNull(&#39;c&#39;, &quot;abcdefg&quot;.toVector)
val s: String =
  if(n != null)
    s&quot;the index was $n!&quot;
  else
    null
  }
if(s != null)
  println(s)
</pre></div>
</div>
<p>But in Scala you can do this:</p>
<div class="highlight-scala"><div class="highlight"><pre>val s: Option[String] =
  indexOf(&#39;c&#39;, &quot;abcdefg&quot;.toVector) match {
    case Some(n) =&gt; Some(s&quot;the index was $n!&quot;)
    case None =&gt; None
  }
s match {
  case Some(x) =&gt; println(x)
  case None =&gt;
}
</pre></div>
</div>
<p>That keeps things nicely within the Option world so that there is no
question about whether any value might or might not be null at any time,
and when null-checks are necessary. However, it’s still a bit verbose.
We can get the same result by doing this:</p>
<div class="highlight-scala"><div class="highlight"><pre>indexOf(&#39;c&#39;, &quot;abcdefg&quot;.toVector)
  .map(n =&gt; s&quot;the index was $n!&quot;)
  .foreach(println(_))
</pre></div>
</div>
<p>So see examples of all the various methods on Option, see Scala Option
Cheat Sheet.</p>
<p>As a final note, Option is really great for chaining together operations
that should only succeed if all the values are present, and fall to None
if any is None. If we were looking values up in a Map, we could do
something like:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">m</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="s">&quot;one&quot;</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="s">&quot;two&quot;</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="s">&quot;three&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">s1</span> <span class="k">=</span>                  <span class="c1">// s1: Option[String] = Some(&quot;onetwothree&quot;)</span>
  <span class="k">for</span><span class="o">(</span>
    <span class="n">a</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">b</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
    <span class="n">c</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
  <span class="o">)</span> <span class="k">yield</span> <span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">)</span>

<span class="k">val</span> <span class="n">s2</span> <span class="k">=</span>                  <span class="c1">// s2: Option[String] = None</span>
  <span class="k">for</span><span class="o">(</span>
    <span class="n">a</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">b</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
    <span class="n">c</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
  <span class="o">)</span> <span class="k">yield</span> <span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="implicit-classes">
<h2>Implicit Classes<a class="headerlink" href="#implicit-classes" title="Permalink to this headline">¶</a></h2>
<p>Scala allows you to “add” behavior to existing classes in a principled
way using implicit classes. An implicit class takes exactly one
constructor argument that is the type to be extended and defines
behavior that should be allowed for that type.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">implicit</span> <span class="k">class</span> <span class="nc">EnhancedVector</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Vector</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">sumOfSquares</span> <span class="k">=</span> <span class="n">xs</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">).</span><span class="n">sum</span>
<span class="o">}</span>

<span class="nc">Vector</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">).</span><span class="n">sumOfSquares</span>        <span class="c1">// res0: Int = 14</span>
</pre></div>
</div>
</div>
<div class="section" id="magic-methods">
<h2>Magic methods<a class="headerlink" href="#magic-methods" title="Permalink to this headline">¶</a></h2>
<p>apply</p>
<p>The apply method of a class or object is used to overload the
parentheses syntax, allowing you to specify the behavior of what looks
like function application.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">){</span>
  <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">j</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>
<span class="o">}</span>

<span class="k">val</span> <span class="n">something</span> <span class="k">=</span> <span class="k">new</span> <span class="n">A</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="n">something</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span>                        <span class="c1">// res0: Int = 7</span>
</pre></div>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="atelier-jdev-1-kafka.html" title="previous chapter (use the left arrow)">1. Big data messaging with Kafka</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="atelier-jdev-3-spark.html" title="next chapter (use the right arrow)">3. An introduction to Big Data analysis with Spark</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="atelier-jdev-3-spark.html" title="3. An introduction to Big Data analysis with Spark"
             >next</a> |</li>
        <li class="right" >
          <a href="atelier-jdev-1-kafka.html" title="1. Big data messaging with Kafka"
             >previous</a> |</li>
        <li><a href="index.html">Logisland - JDev 2017 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2017, Thomas Bailet. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>